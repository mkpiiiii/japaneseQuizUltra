<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
  <title>„Éú„Ç§„ÇπÂΩì„Å¶„ÇØ„Ç§„Ç∫ Ultra</title>

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #111;
      color: #f5f5f5;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      padding: 20px;
      box-sizing: border-box;
    }
    h1 {
      margin-top: 10px;
      margin-bottom: 5px;
      font-size: 1.8rem;
      text-align: center;
    }
    .sub {
      font-size: 0.9rem;
      color: #aaa;
      margin-bottom: 20px;
      text-align: center;
    }
    .game-container {
      width: 100%;
      max-width: 600px;
      background: #1e1e1e;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 0 20px rgba(0,0,0,0.6);
      box-sizing: border-box;
    }
    .top-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }
    .score {
      font-size: 0.95rem;
      color: #ddd;
    }
    button {
      cursor: pointer;
      border: none;
      border-radius: 999px;
      padding: 10px 18px;
      font-size: 0.95rem;
      margin: 4px;
      background: #333;
      color: #f5f5f5;
      transition: transform 0.05s ease, box-shadow 0.1s ease, background 0.1s;
    }
    button:hover {
      transform: translateY(-1px);
      box-shadow: 0 3px 8px rgba(0,0,0,0.4);
      background: #444;
    }
    button:active {
      transform: translateY(1px);
      box-shadow: none;
    }
    button.primary {
      background: #0078ff;
    }
    button.primary:hover {
      background: #1188ff;
    }
    button.secondary {
      background: #555;
    }
    .choices {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 10px;
      margin-bottom: 10px;
    }
    .choice-btn.correct {
      background: #0c8d3b;
    }
    .choice-btn.wrong {
      background: #a52525;
    }
    .status {
      min-height: 40px;
      margin-top: 10px;
      font-size: 0.95rem;
      text-align: center;
      white-space: pre-line;
    }
    .status.correct {
      color: #6be372;
    }
    .status.wrong {
      color: #ff8c8c;
    }
    .audio-hint {
      font-size: 0.8rem;
      color: #888;
      text-align: center;
      margin-top: 4px;
    }
  </style>
</head>
<body>
  <h1>„Éú„Ç§„ÇπÂΩì„Å¶„ÇØ„Ç§„Ç∫ Ultra</h1>
  <div class="sub">Èü≥„ÇíËÅû„ÅÑ„Å¶„Çª„É™„Éï„ÇíÂΩì„Å¶„Å¶„Å≠ üîä</div>

  <div class="game-container">
    <div class="top-row">
      <div class="score">
        „Çπ„Ç≥„Ç¢: <span id="score">0</span> / <span id="total">0</span>
      </div>
      <div>
        <button id="playBtn" class="primary">‚ñ∂ „ÇÇ„ÅÜ‰∏ÄÂ∫¶ÂÜçÁîü</button>
        <button id="nextBtn" class="secondary">Ê¨°„ÅÆÂïèÈ°å ‚ñ∂</button>
      </div>
    </div>

    <div class="audio-hint">‚Äª Èü≥ÈáèÊ≥®ÊÑè</div>

    <div class="choices" id="choices"></div>

    <div id="status" class="status"></div>
  </div>

  <script>
    // GitHub „ÅÆ public/audio „Éï„Ç©„É´„ÉÄÂÜÖ„ÅÆ„Éï„Ç°„Ç§„É´Âêç„Å´Âêà„Çè„Åõ„Å¶‰∏¶„Åπ„Çã
    const voices = [
      { id: 1, label: "Âá∫„Å¶„ÅÑ„Åë",             file: "public/audio/Âá∫„Å¶„ÅÑ„Åë.wav" },
      { id: 2, label: "‰ªïÊñπ„Å™„ÅÑ„Å≠",           file: "public/audio/‰ªïÊñπ„Å™„ÅÑ„Å≠.wav" },
      { id: 3, label: "ÊúÄËøë„Å†„Çâ„Åó„Å≠„Åà",       file: "public/audio/ÊúÄËøë„Å†„Çâ„Åó„Å≠„Åà.wav" },
      { id: 4, label: "„Éõ„Ç§„Éõ„Ç§„ÉÅ„É£„Éº„Éè„É≥‚ë†",  file: "public/audio/„Éõ„Ç§„Éõ„Ç§„ÉÅ„É£„Éº„Éè„É≥ (1).wav" },
      { id: 5, label: "„Éõ„Ç§„Éõ„Ç§„ÉÅ„É£„Éº„Éè„É≥‚ë°",  file: "public/audio/„Éõ„Ç§„Éõ„Ç§„ÉÅ„É£„Éº„Éè„É≥ (2).wav" },
      { id: 6, label: "„ÅÇ„Çì„Åã„Åë„ÉÅ„É£„Éº„Éè„É≥",   file: "public/audio/„ÅÇ„Çì„Åã„Åë„ÉÅ„É£„Éº„Éè„É≥.wav" },
      { id: 7, label: "„Ç¢„ÉºÔºÅ",               file: "public/audio/„Ç¢„ÉºÔºÅ (1).wav" },
      { id: 8, label: "„ÅÇÔºüÊúÄËøë„Å†„Çâ„Åó„Å≠„Åà„Å™", file: "public/audio/„ÅÇÔºüÊúÄËøë„Å†„Çâ„Åó„Å≠„Åà„Å™ (2).wav" },
      { id: 9, label: "NO",                   file: "public/audio/NO.wav" }
    ];

    let current = null;
    let audio = null;
    let score = 0;
    let total = 0;
    let answered = false;

    const scoreEl   = document.getElementById("score");
    const totalEl   = document.getElementById("total");
    const statusEl  = document.getElementById("status");
    const choicesEl = document.getElementById("choices");
    const playBtn   = document.getElementById("playBtn");
    const nextBtn   = document.getElementById("nextBtn");

    function shuffle(array) {
      const arr = array.slice();
      for (let i = arr.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [arr[i], arr[j]] = [arr[j], arr[i]];
      }
      return arr;
    }

    function playCurrentAudio() {
      if (!current) return;
      if (audio) {
        audio.pause();
        audio.currentTime = 0;
      }
      audio = new Audio(current.file);
      audio.play().catch(e => {
        console.warn("ÂÜçÁîü„Å´Â§±Êïó:", e);
        statusEl.textContent = "Èü≥Â£∞„ÅÆÂÜçÁîü„Å´Â§±Êïó„Åó„Åæ„Åó„ÅüÔºà„Éë„Çπ„Åã„Éï„Ç°„Ç§„É´Âêç„ÇíÁ¢∫Ë™çÔºâ";
      });
    }

    function newQuestion() {
      answered = false;
      statusEl.textContent = "";
      statusEl.className = "status";

      const idx = Math.floor(Math.random() * voices.length);
      current = voices[idx];

      const shuffled = shuffle(voices);
      choicesEl.innerHTML = "";
      shuffled.forEach(v => {
        const btn = document.createElement("button");
        btn.textContent = v.label;
        btn.classList.add("choice-btn");
        btn.addEventListener("click", () => handleAnswer(v, btn));
        choicesEl.appendChild(btn);
      });

      total++;
      totalEl.textContent = total.toString();
      playCurrentAudio();
    }

    function handleAnswer(chosen, btnEl) {
      if (answered) return;
      answered = true;

      const buttons = Array.from(document.querySelectorAll(".choice-btn"));
      buttons.forEach(b => b.disabled = true);

      if (chosen.id === current.id) {
        score++;
        scoreEl.textContent = score.toString();
        statusEl.textContent = "Ê≠£Ëß£ÔºÅ\nÊ¨°„ÅÆÂïèÈ°å„Å∏Ë°å„Åè„Åã„ÄÅ„ÇÇ„ÅÜ‰∏ÄÂ∫¶ÂÜçÁîü„Åó„Å¶„ÇÇOK„ÄÇ";
        statusEl.className = "status correct";
        btnEl.classList.add("correct");
      } else {
        statusEl.textContent = `‰∏çÊ≠£Ëß£‚Ä¶\nÊ≠£Ëß£„ÅØ„Äå${current.label}„Äç„Åß„Åó„Åü„ÄÇ`;
        statusEl.className = "status wrong";
        btnEl.classList.add("wrong");
        buttons.forEach(b => {
          if (b.textContent === current.label) {
            b.classList.add("correct");
          }
        });
      }
    }

    playBtn.addEventListener("click", playCurrentAudio);
    nextBtn.addEventListener("click", newQuestion);

    window.addEventListener("load", newQuestion);
  </script>
</body>
</html>
